---
title: "分布式 ID"
date: 2022-07-03T14:54:47+08:00
draft: true
---

分布式 ID 生成是分布式系统中的一个基本的需求。比如数据库分库分表需要全局唯一的 ID 来作为每张表的业务主键。

全局唯一是分布式 ID 生成系统的最基本的要求。在此基础上，根据对递增要求的不同，可分为四种情况：无递增、趋势递增、单调递增、单调连续递增。实现难度依次递增。

## 无递增

可直接使用 UUID 作为分布式 ID。

## 趋势递增

趋势递增指 ID 的生成整体上呈递增趋势，但是局部可能下降。

例如：1，3，6，7，5，10，11，12，8，13，14。

### 方案一：Snowflake 算法

ID 生成方式如下：

```
ID = 本机时间戳(ms) + 本机编号 ID + 本机单调递增序号
```



### 方案二：DB 自增主键



### 方案三：DB + 本地缓存



## 单调递增





## 单调连续递增

这种情况只能利用单机 DB 的自增特性，对系统高可用性、性能的约束太大，无法做到分布式。

通常单调递增就可以满足业务需求，所以一般不会去实现单调连续递增。
